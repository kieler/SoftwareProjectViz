# Example for TS projects built with yarn using dependency injection via InversifyJS
This example configuration combines two kinds of connections that may occur within TypeScript projects&mdash;dependencies between packages and requirements and providings of services between classes via dependency injection using [InversifyJS](https://github.com/inversify/InversifyJS).

The `generate` project provides a command line tool using [Picocli](https://picocli.info/) to generate a `yarnInversify` model from a source project. For this example, we expect the project to be structured into:

- a `yarn.lock` file defining all resolved package dependencies within the project. This example uses yarn.lock files generated by yarn version 3.2.0 using lockfile version 6.
- `package.json` files defining local packages with some additional information
- TypeScript source files using dependency injection via InversifyJS. We identify interfaces and classes for InversifyJS in the following schemas:
    - all (di).config.ts files are seen as definitions for binding concrete implementations to interfaces, as suggested by InversifyJS. This means these files are searched for any `(re)bind(TYPES.[Interface]).to([Class])` excerpts in the code to identify and connect classes to provide an interface.
    - all (other) .ts files are searched for classes marked with `@injectable()` to define a class for InversifyJS.
    - in these classes, requirements for bindings of other interfaces or classes are expected to follow the form `@(multi)inject([Class])` or `@(multi)inject(TYPES.[Interface])` somewhere within the class definition.

One project where this example works is the [Sprotty](https://github.com/eclipse/sprotty) framework. To make this work with the `yarn.lock` file in this perticular project, the steps for migrating away from Yarn v1 as described in its [migration guide](https://yarnpkg.com/getting-started/migration) need to be followed so that the lockfile will be parsable by this generator.


# Using the example
Building the `.spvizmodel` and `.spviz` files in Eclipse will cause it to create/update projects for the yarnInversify model and visualization. Importing the `generate` project next to that will allow you to use it and generate model files from your project.